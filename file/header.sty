% This file is part of eclecTeX, a multi-purpose LaTeX library.
%
% © 2009-2013 Sebastián González Montesinos.
%
% This work may be distributed and/or modified under the conditions of
% the LaTeX Project Public License version 1.3 or later.
%
% This work has the LPPL maintenance status `maintained'.
% The Current Maintainer of this work is Sebastián González.

\NeedsTeXFormat{LaTeX2e}[1999/12/01]

\ProvidesPackage{eclectex/file/header}
  [2013/07/11 v0.1 Management of file headers.]

% ---[ Packages ]---

\RequirePackage{etoolbox}
\RequirePackage{scrpage2}
\RequirePackage{geometry}
\RequirePackage{lastpage}

\RequirePackage{eclectex/time}
\RequirePackage{eclectex/file/data}

% ---[ Configuration ]---

\pagestyle{scrheadings}
\geometry{includehead, headheight=6mm}
%\setheadtopline{.1pt}[\color{black!40}]
\setheadsepline{.3pt}
\setkomafont{pageheadfoot}{\sffamily\small}
\setkomafont{pagenumber}{\usekomafont{pageheadfoot}} % same font as the rest
\clearscrheadfoot

% ---[ Document Data ]---

\AtBeginDocument
 {\def\hsep{\hfill\hfill|\hfill}
  \chead
  {\ifdefvoid{\@title}{}{\ifdefvoid{\plain@title}{}{\plain@title \hsep}}%
   \ifdefvoid{\@fileName}{}{\@fileName \hsep}%
   \ifdefvoid{\@fileReference}{}{\@fileReference \hsep}%
   \today \hsep%
   Page \pagemark/\pageref{LastPage}}}
